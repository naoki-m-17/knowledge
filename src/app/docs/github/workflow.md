# GitHub リポジトリ運用・紐付け手順書

## 前提条件
- ローカルでプロジェクトを作成済み
- GitHub上でリモートリポジトリを作成済み（例: `https://github.com/userid/hoge.git`）

## リポジトリ接続手順

### ステップ1: ローカルでGitリポジトリを初期化（未初期化の場合）

プロジェクトディレクトリに移動し、Gitリポジトリを初期化します。

```bash
cd /Users/hoge
git init
```

**`git init`の意味**:
- `git init`は、現在のディレクトリをGitリポジトリとして初期化するコマンドです
- 実行すると、`.git`という隠しフォルダが作成され、Gitの管理に必要な情報が保存されます
- この時点では、まだファイルの変更履歴は記録されません（履歴の記録はコミットから始まります）

**注意**: 既にGitリポジトリとして初期化されている場合は、このステップはスキップしてください。

#### コミット履歴について

**重要なポイント**: Gitのコミット履歴は、**最初のコミットから始まります**。

- **`git init`直後から最初のコミットまで**: この期間の変更は履歴として記録されません
    - ファイルを作成・編集しても、まだコミットしていない状態は「未追跡」または「未ステージング」として扱われます
    - この状態は`git status`で確認できますが、コミット履歴には残りません

- **最初のコミット以降**: すべてのコミットが履歴として記録されます
    - 公開リポジトリでは、最初のコミット以降のすべてのコミット履歴と差分を見ることができます
    - `git log`で確認できるのは、最初のコミットから現在までの履歴です

**例**:
```
プロジェクト作成 → git init → ファイル編集 → git add → git commit（初回）
                    ↑                                    ↑
              履歴なし（未追跡状態）              ここから履歴が始まる
```

つまり、**プロジェクト作成時から最初のコミットまでの差分は、コミット履歴として見ることはできません**。最初のコミットが「初期状態」として記録され、それ以降の変更の差分のみが履歴として残ります。

### ステップ2: 既存のリモート設定を確認

既にリモートが設定されているか確認します。

```bash
git remote -v
```

**既にリモートが存在する場合**:
- 既存のリモートを削除してから新しく追加するか、既存のリモートのURLを更新します。
- 削除する場合: `git remote remove origin`
- URLを更新する場合: `git remote set-url origin https://github.com/userid/hoge.git`

**リモートが存在しない場合**: 次のステップに進みます。

### ステップ3: リモートリポジトリの登録

GitHubのリモートリポジトリを登録します。

```bash
git remote add origin https://github.com/userid/hoge.git
```

登録を確認します。

```bash
git remote -v
```

### ステップ4: ファイルのステージング

変更をステージングエリアに追加します。初回の場合は、プロジェクト全体を追加します。

```bash
# すべてのファイルをステージング
git add .

# または、特定のファイルのみをステージング
git add src/ package.json README.md
```

**ステージングのタイミング**:
- 機能追加や修正が完了した時点
- コミットする前に必ず実行
- `.gitignore`で除外されたファイルは自動的に無視されます

### ステップ5: 初回コミット（未コミットの場合）

まだコミットがない場合は、初回コミットを作成します。

```bash
git commit -m "Initial commit: プロジェクトの初期セットアップ"
```

**コミットのタイミング**:
- ステージング後、論理的な単位でコミット
- 機能ごと、修正ごとに分けてコミットすることを推奨
- コミットメッセージは変更内容が分かるように記述

### ステップ6: リモートリポジトリへの初回プッシュ

ローカルの変更をリモートリポジトリにプッシュします。

```bash
# メインブランチをリモートにプッシュ（初回）
git push -u origin main

# または、ブランチ名が master の場合
git push -u origin master
```

**`-u`オプションの意味**:
- `-u` (または `--set-upstream`) は、ローカルブランチとリモートブランチの追跡関係を設定します
- 次回以降は `git push` だけでプッシュできます

### ステップ7: プッシュの確認

GitHubのリポジトリページで、ファイルが正しくアップロードされているか確認します。

## 今後の運用フロー

### 日常的な作業フロー

1. **変更を加える**
   ```bash
   # ファイルを編集
   ```

2. **変更内容を確認**
   ```bash
   git status
   git diff
   ```

3. **ステージング**
   ```bash
   git add .
   # または特定のファイル
   git add src/app/page.tsx
   ```

4. **コミット**
   ```bash
   git commit -m "変更内容を簡潔に記述"
   ```

5. **プッシュ**
   ```bash
   git push
   ```

### よく使うコマンド

```bash
# 現在の状態を確認
git status

# 変更内容を確認
git diff

# コミット履歴を確認
git log --oneline

# リモートの最新情報を取得
git fetch

# リモートの変更をローカルにマージ
git pull
```

## トラブルシューティング

### リモートリポジトリに既にファイルがある場合

リモートリポジトリにREADMEやLICENSEなどが既に存在する場合、以下の方法で対処します。

**方法1: リモートの変更をマージ**
```bash
git pull origin main --allow-unrelated-histories
git push -u origin main
```

**方法2: リモートの内容を無視して強制プッシュ（注意: リモートの内容が上書きされます）**
```bash
git push -u origin main --force
```

### リモートURLを変更する場合

```bash
git remote set-url origin https://github.com/新しいユーザー名/新しいリポジトリ名.git
```
