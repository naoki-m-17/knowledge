# React の基本ルールと慣習

## "use client" 指示文

「このファイルはブラウザ側で動かしてね」という指示。React（Server Components）の基本ルール。

### 適用範囲

ファイルの先頭に記述することで、そのファイル全体（およびインポートされた子部品）を「クライアント境界」としてマークする。

### 静的 HTML 生成への影響（重要）

`"use client"` を付けていても、**最初の表示に必要な HTML はサーバー側で生成される。**

そのため、SEO（検索エンジン対策）に必要なテキスト情報などはしっかり HTML に含まれる。

### 役割の違い

- サーバー：JSX を解析して「見た目（HTML）」だけを作る。
- ブラウザ：HTML を受け取った後、`useState` や `useEffect` などの「JavaScript の機能」を有効化する。

### 結論

`export const Sidebar` 内の JSX は静的 HTML に含まれ、ブラウザに届いてから React がイベントリスナーなどを付着させて動くようになる。

## FC 型 (TypeScript)

Functional Component の略。「React の関数部品」という設計図。大文字で始まる。

## useState フック (関数)

画面内の「状態（データ）」を管理する。小文字始まり、`{}` でインポート。

コンポーネント内の「状態」を管理する。値が変わると React が検知し、画面の必要な部分だけを再描画する。

## useEffect フック (関数)

画面が表示された後や URL が変わった後に「処理を実行」する。小文字始まり、`{}` でインポート。

ブラウザに描画が完了した「後」に実行される。API 取得、URL 監視（usePathname との連携）、タイマー設定などに使用。

## useState / useEffect とハイドレーションの仕組み

### ハイドレーション（Hydration）との関係

Next.js はサーバーで作成した静的 HTML をブラウザに送り、その後 JavaScript（React）が「命を吹き込む」工程。

サーバー側には「今の URL」や「ブラウザの状態」がない。

**useEffect はハイドレーション完了後（ブラウザ側）でしか動かない**ため、サーバーとクライアントの表示の食い違いを防ぐ重要な役割を持つ。

Sidebar の例：サーバーでは「全部閉じた状態」で HTML を作り、ブラウザでハイドレーションが終わった瞬間に useEffect が URL を見て「該当カテゴリを開く」という動作になる。

## 大文字の命名慣習（絶対ルール）

コンポーネント（Sidebar 等）は大文字で始める。

React は `<sidebar>`（小文字）なら HTML 標準タグ、`<Sidebar>`（大文字）なら自作部品と判断するため。

## {} でのインポート文法

React パッケージ内の「数ある道具の中の一つ」を指名して呼ぶための JS 文法。

## 変数スタイル (const) での定義

【区分：言語 + React の慣習】

理由：JS の進化により「書き換え不可能な関数」として定義可能になった。

React での意味：`FC` 型を適用しやすいため、現在の React 開発では `function` より `const` がモダンとされる。

